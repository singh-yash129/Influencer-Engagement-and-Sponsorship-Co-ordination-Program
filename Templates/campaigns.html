<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{url_for('static',filename='find.css')}}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="{{url_for('static',filename='campaigns.css')}}">
    <style>
        .custom-file-input {
            display: none;
        }
        .custom-file-label {
            display: inline-block;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        }
        #image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
        }
        #image-preview img {
            max-width: 100px;
            max-height: 100px;
            border: 2px solid #ddd;
            border-radius: 5px;
            position: relative;
        }
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
        }
        .add-more-images {
            cursor: pointer;
            font-size: 40px;
            color: #28a745;
            border: 1px solid grey;
            border-radius: 10px;
        }
    </style>
    <script>
        function toggleUserAdmin() {
            var publicPrivateSlider = document.getElementById('public-private-slider-button');
            var privacyInput = document.getElementById('privacy');
            if (publicPrivateSlider.classList.contains('left')) {
                publicPrivateSlider.classList.remove('left');
                publicPrivateSlider.classList.add('right');
                privacyInput.value = 'private';
            } else {
                publicPrivateSlider.classList.remove('right');
                publicPrivateSlider.classList.add('left');
                privacyInput.value = 'public';
            }
        }

        function removeImage(event) {
            event.target.parentElement.remove();
        }

        document.addEventListener('DOMContentLoaded', function() {
            var modal = document.getElementById("myModal");
            var span = document.getElementsByClassName("close")[0];
            var cancel = document.getElementsByClassName('cancel')[0];
            span.onclick = function() {
                modal.style.display = "none";
            }
            cancel.onclick = function(){modal.style.display="none";}
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }

            var viewButtons = document.querySelectorAll(".add");
            viewButtons.forEach(function(btn) {
                btn.onclick = function() {
                    modal.style.display = "block";
                }
            });

            document.getElementById('image').addEventListener('change', function(event) {
                var imagePreview = document.getElementById('image-preview');
                Array.from(event.target.files).forEach(file => {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                        var imgContainer = document.createElement('div');
                        imgContainer.style.position = 'relative';
                        var img = document.createElement('img');
                        img.src = e.target.result;
                        var removeBtn = document.createElement('button');
                        removeBtn.className = 'remove-image';
                        removeBtn.innerHTML = '×';
                        removeBtn.onclick = removeImage;
                        imgContainer.appendChild(img);
                        imgContainer.appendChild(removeBtn);
                        imagePreview.insertBefore(imgContainer, addMoreImagesBtn);
                    }
                    reader.readAsDataURL(file);
                });
            });

            var addMoreImagesBtn = document.createElement('span');
            addMoreImagesBtn.className = 'material-symbols-outlined add-more-images';
            addMoreImagesBtn.innerHTML = 'add';
            addMoreImagesBtn.onclick = function() {
                document.getElementById('image').click();
            };
            document.getElementById('image-preview').appendChild(addMoreImagesBtn);
        });
    </script>
</head>
<body>
    <div class="header">
        <div id="logo">
            <img src="{{url_for('static',filename='logo.jpeg')}}" alt="IEAS Logo">
        </div>
        <h2>Sponsor</h2>
        <div id="links">
            <a href="">Profile</a>
            <a href="{{ url_for('sponsor_dashboard',user_1=current_user.username) }}">Dashboard</a>
            <a href="{{ url_for('spo_inf_search') }}">Find</a>
            <a href="{{ url_for('about') }}">Stats</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>
  
    <h2 style="text-align: center; font-weight: bold;font-size: 35px;text-decoration: underline;"> Campaigns : </h2>
    <div id="box">
        {% for i in camp %}
        <div class="main1" >
            <div class="campign1">
                <img src="{{i.image}}" width="160px">
                <h3>{{i.title}}</h3>
                <details style="word-wrap: normal;">Budget : {{i.budget}}</details>
                <br>
                <button class="view" onclick="window.location.href='{{ url_for('view_campaign', campaign_id=i.campaign_id) }}'">View</button>
            </div>
        </div>
    {% endfor%}  
        <div class="main">
            <div class="campign">
                <span class="material-symbols-outlined" style="border: 2px solid black ; border-radius: 20px;padding: 20px;font-size: 54px;">
                    add
                </span>
                <br>
                <h3>Add Campaigns</h3>
                <br>
                <button class="add">Add</button>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 style="text-align: center;text-decoration: underline; font-weight: bold;">Campaign Details :</h2>
            <br>
            <form action="{{ url_for('add_campaign', user=current_user.username) }}" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="user_id" value="{{ current_user.username }}">
            <div class="public-private-slider-container">
                <div class="public-private-slider" onclick="toggleUserAdmin()">
                    <div class="public-private-slider-label left">Public</div>
                    <div class="public-private-slider-label right">Private</div>
                    <div id="public-private-slider-button" class="public-private-slider-button left"></div>
                </div>
            </div>
            <input type="hidden" id="privacy" name="privacy" value="public">
            <div class="form-group">
                <label for="title">Title :</label>
                <input type="text" id="title" name="title" required>
            </div>
            <div class="form-group">
                <label for="description">Description :</label>
                <textarea style="border: 10px;" name="description" id="discription" rows="10" cols="165"  placeholder="Discription..."></textarea>
            </div>
            <div class="form-group">
                <label for="Image">Image :</label>
                <input class="custom-file-input" type="file" id="image" name="image" multiple>
                <div id="image-preview">

                </div>
            </div>
            <div class="form-group">
                <label for="niche">Niche :</label>
                <input type="text" id="niche" name="niche" required>
            </div>
            <div id="date" style="display: flex;align-items: center;justify-content: space-between;">
                <div class="form-group">
                    <label for="start_date">Start Date :</label>
                    <input type="date" id="start_date" name="start_date" required>
                </div>
                <div class="form-group">
                    <label for="end_date">End Date :</label>
                    <input type="date" id="end_date" name="end_date" required>
                </div>
            </div>
            <div class="form-group">
                <label for="target">Target Audience :</label>
                <input type="text" id="target" name="target" required>
            </div>
            <div class="form-group">
                <label for="goal">Goal :</label>
                <input type="text" id="goal" name="goal" required>
            </div>
            <div class="form-group">
                <label for="budget">Budget :</label>
                <div style="display: flex; align-items: center;">
                    <select id="currency" name="currency" style="width: auto; margin-right: 10px;">
                        <option value="INR">₹</option>
                        <option value="USD">$</option>
                        <option value="EUR">€</option>
                        <option value="GBP">£</option>
                        <option value="JPY">¥</option>
                        <option value="AUD">A$</option>
                        <option value="CAD">C$</option>
                        <option value="CHF">CHF</option>
                        <option value="CNY">¥</option>
                        <option value="SEK">kr</option>
                        <option value="NZD">NZ$</option>
                        <option value="MXN">Mex$</option>
                        <option value="SGD">S$</option>
                        <option value="HKD">HK$</option>
                        <option value="NOK">kr</option>
                        <option value="KRW">₩</option>
                        <option value="TRY">₺</option>
                        <option value="RUB">₽</option>
                        <option value="BRL">R$</option>
                        <option value="ZAR">R</option>
                        <option value="DKK">kr</option>
                        <option value="PLN">zł</option>
                        <option value="TWD">NT$</option>
                        <option value="THB">฿</option>
                        <option value="MYR">RM</option>
                        <option value="IDR">Rp</option>
                        <option value="CZK">Kč</option>
                        <option value="HUF">Ft</option>
                        <option value="ILS">₪</option>
                        <option value="PHP">₱</option>
                        <option value="AED">د.إ</option>
                        <option value="SAR">ر.س</option>
                        <option value="NGN">₦</option>
                        <option value="ARS">$</option>
                        <option value="CLP">$</option>
                        <option value="COP">$</option>
                        <option value="EGP">£</option>
                        <option value="MAD">DH</option>
                    </select>
                    <input type="number" id="budget" name="budget" required>
                </div>
            </div>
            <div class="buttons" style="display: flex;align-items: center;justify-content: space-between;gap:10px">
                <button class="cancel">Cancel</button>
                <button type="submit">Add</button>
                <button type="reset">Reset</button>
            </div>
        </from>
        </div>
  
    </div>

</body>
</html>
